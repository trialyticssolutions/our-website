!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=6)}([function(e,t,o){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=t.getCookie=void 0,t.getCookie=function(e){for(var t=e+"=",o=decodeURIComponent(document.cookie).split(";"),r=0;r<o.length;r++){for(var n=o[r];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}},t.setCookie=function(e,t,o,r){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var i=e+"="+t+";expires="+n.toUTCString()+";path=/";r&&(i+=";domain="+r),document.cookie=i}}.apply(t,[o,t]))||(e.exports=r)},function(e,t,o){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={apiPublicUrl:"https://api.kiflo.com/v3",queryParameterName:"kfl_ln",referralCodeHeaderName:"Kiflo-Referral-Code",referrerUrlHeaderName:"Kiflo-Referrer-Url",queryParameterVerify:"kfl_verify",cookieName:"kfl_key",blackListedDomains:[]}}.apply(t,[o,t]))||(e.exports=r)},function(e,t,o){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParams=void 0,t.getQueryParams=function(e){var t=window.location.search;return new URLSearchParams(t).get(e)}}.apply(t,[o,t]))||(e.exports=r)},function(e,t,o){var r,n;r=[o,t,o(0),o(2)],void 0===(n=function(e,t,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sender=void 0;var n=function(){function e(e,t){this.apiKey=e,this.settings=t,this.isXHRSupported=!1,this.isXDRSupported=!1}return e.prototype.send=function(e,t,o,r){if("undefined"!=typeof XMLHttpRequest){if("withCredentials"in new XMLHttpRequest)this.isXHRSupported=!0;else if("undefined"!=typeof XDomainRequest)return void console.error("XMLHttpRequest withCredentials should be supported");this.isXHRSupported?this.xhrSender(e,t,!0,o,r):this.isXDRSupported}else console.error("XMLHttpRequest should be supported")},e.prototype.handleError=function(e,t){var o={errorCode:e.statusText,errorMessage:""};""!==e.response&&(o=JSON.parse(e.response)),t&&t(o)},e.prototype.xhrReadyStateChange=function(e,t,o,r){4===e.readyState&&((e.status<200||e.status>=300)&&0!==e.status?401===e.status&&r?r({errorCode:e.statusText,errorMessage:"Your are not authenticated. Please check that your JS snippet contains the correct apikey."}):this.handleError(e,r):o&&o(e.responseText))},e.prototype.xhrSender=function(e,t,n,i,a){var s=this,u=new XMLHttpRequest;u.open("POST",e,n),u.setRequestHeader("Content-type","application/json"),u.setRequestHeader("Authorization","AppId "+this.apiKey);var c=o.getCookie(this.settings.cookieName);c&&u.setRequestHeader(this.settings.cookieName.toUpperCase(),c);var l=r.getQueryParams(this.settings.queryParameterName);l&&u.setRequestHeader(this.settings.referralCodeHeaderName,l);var d=document.URL;u.setRequestHeader(this.settings.referrerUrlHeaderName,d),u.onreadystatechange=function(){return s.xhrReadyStateChange(u,t,i,a)},u.onerror=function(){return s.handleError(u,a)};try{u.send(t)}catch(e){a&&a({errorCode:"TechnicalError",errorMessage:"Unknown technical error occured. Please contact the support."})}},e}();t.Sender=n}.apply(t,r))||(e.exports=n)},function(e,t,o){var r,n=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))(function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):function(e){return e instanceof o?e:new o(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeHubSpotFormsCallbacks=void 0,t.initializeHubSpotFormsCallbacks=function(e,t){var o=this;t.length&&(window.addEventListener("message",function(o){var r;"hsFormCallback"===o.data.type&&"onFormSubmitted"===o.data.eventName&&t.includes(null===(r=o.data)||void 0===r?void 0:r.id)&&e("hs-forms-legacy",o.data,void 0,function(e){console.error("[Kiflo] Cannot submit HubSpot form to Kiflo",e)})}),window.addEventListener("hs-form-event:on-submission:success",function(r){return n(o,void 0,void 0,function(){var o,n,a,s;return i(this,function(i){switch(i.label){case 0:return t.includes(null===(s=r.detail)||void 0===s?void 0:s.formId)?[4,(o=HubSpotFormsV4.getFormFromEvent(r)).getFormId()]:[2];case 1:return n=i.sent(),[4,o.getFormFieldValues()];case 2:return a=i.sent(),e("hs-forms",{formId:n,values:a},void 0,function(e){console.error("[Kiflo] Cannot submit HubSpot form to Kiflo",e)}),[2]}})})}))}}.apply(t,[o,t]))||(e.exports=r)},function(e,t,o){var r,n;r=[o,t,o(0),o(4),o(3)],void 0===(n=function(e,t,o,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeKifloJS=void 0;t.initializeKifloJS=function(e,t,i,a){var s=new n.Sender(e,t),u={"cookie.ready":[],ready:[]};a&&a.forEach(function(e){"cookie.ready"===e[0]||"ready"===e[0]?"function"==typeof e[1]?u[e[0]].push(e[1]):console.error("Invalid callback provided for event: "+e[0]):console.error("Invalid event type: "+e[0])});var c=function(e,r,n,i){if("getTrackingCode"===e)return o.getCookie(t.cookieName);var a={action:e,payload:r};s.send(t.apiPublicUrl+"/js",JSON.stringify(a),n,i)},l=new URLSearchParams(window.location.search),d=!1;if(l.has(t.queryParameterName)){var f={type:"visit",referralCode:l.get(t.queryParameterName),currentUrl:document.URL,sourceUrl:document.referrer};d=!0,c("event",f,function(e){var r=JSON.parse(e);o.getCookie(t.cookieName)||(o.setCookie(t.cookieName,r.uniqueKey,r.cookieExpirationDays,i),p("cookie.ready")),p("ready")},function(e){console.log("Failed to track visit. Details: ",e),p("ready")})}if(l.has(t.queryParameterVerify)){f={sourceUrl:document.location.href,verificationKey:l.get(t.queryParameterVerify)};c("verify",f,function(){window.close()},function(e){return console.log("Failed to verify your installation. Details: ",e)})}var p=function(e){var r=o.getCookie(t.cookieName);u[e].length>0&&u[e].forEach(function(e){e(r)})};o.getCookie(t.cookieName)&&p("cookie.ready"),d||p("ready");return s.send(t.apiPublicUrl+"/js",JSON.stringify({action:"init",payload:""}),function(e){var t=JSON.parse(e);r.initializeHubSpotFormsCallbacks(c,t.hubSpotFormIds)},function(e){console.warn("Failed to initialize Kiflo JS SDK: ",e)}),{main:c}}}.apply(t,r))||(e.exports=n)},function(e,t,o){var r,n;r=[o,t,o(5),o(1)],void 0===(n=function(e,t,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});try{if("undefined"!=typeof window&&"undefined"!=typeof JSON){for(var n=0;n<r.default.blackListedDomains.length;n++){if(r.default.blackListedDomains[n]===window.location.origin)throw new Error('The domain "'+window.location.origin+'" is not authorized by Kiflo. If it should be please contact us at help@kiflo.com')}if(void 0===window.kjs)console.error("Invalid snippet. Please check our documentation: https://docs.kiflo.com");else{var i=window.kjs;if(i.apiKey){var a=o.initializeKifloJS(i.apiKey,r.default,i.useDomain,i.callbacks);window.kiflo=a.main}else console.error("An API key is required. Please check our documentation: https://docs.kiflo.com")}}}catch(e){console.warn("Failed to initialize Kiflo JS SDK: "+e.message)}}.apply(t,r))||(e.exports=n)}]);